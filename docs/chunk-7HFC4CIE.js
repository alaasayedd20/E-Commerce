import{a as k}from"./chunk-7W2A23FE.js";import{a as F}from"./chunk-K5QVV5TD.js";import{a as O}from"./chunk-QK2ICGBR.js";import"./chunk-XAZLOLJU.js";import{a as E}from"./chunk-LC46PDLG.js";import"./chunk-NI4CGMN2.js";import{h as T,t as N,w}from"./chunk-RK5LR227.js";import{Fb as c,Hb as p,Mb as b,Oa as g,Ob as P,Sa as o,Sb as D,Ub as I,aa as a,ca as l,db as v,gb as s,kb as C,ma as u,mb as f,na as _,nb as S,ob as r,pb as n,qb as y,tb as x,xb as h,yb as d}from"./chunk-QHBEINOU.js";var V=(t,i)=>i._id,$=t=>["/details",t];function j(t,i){t&1&&(r(0,"p",1),c(1,"No products found in this category."),n())}function A(t,i){if(t&1){let e=x();r(0,"div",3)(1,"div",4)(2,"a",5),y(3,"img",6),n(),r(4,"div",7)(5,"h6",8),c(6),n(),r(7,"p",9),c(8),D(9,"currency"),n(),r(10,"button",10),h("click",function(){let L=u(e).$implicit,M=d(2);return _(M.addCart(L._id))}),c(11," Add to Cart "),n()()()()}if(t&2){let e=i.$implicit;o(2),s("routerLink",P(8,$,e._id)),o(),s("src",e.imageCover,g)("alt",e.title),o(3),p(" ",e.title.split(" ",3).join(" ")," "),o(2),p(" ",I(9,5,e.price,"EGP")," ")}}function B(t,i){if(t&1&&(r(0,"div",2),f(1,A,12,10,"div",3,V),n()),t&2){let e=d();o(),S(e.products)}}var R=class t{_ProductsService=a(k);_CartService=a(E);_ToastrService=a(O);_NgxSpinnerService=a(F);_Route=a(N);categoryId;products=[];getProductsSub;ngOnInit(){this._Route.paramMap.subscribe(i=>{this.categoryId=i.get("id"),this.fetchProducts()})}fetchProducts(){this._NgxSpinnerService.show(),this.getProductsSub=this._ProductsService.getProductsByCategory(this.categoryId).subscribe({next:i=>{this.products=i.data,this._NgxSpinnerService.hide()},error:()=>{this._NgxSpinnerService.hide()}})}ngOnDestroy(){this.getProductsSub&&this.getProductsSub.unsubscribe()}addCart(i){this._CartService.addToCart(i).subscribe({next:e=>{this._CartService.cartNumber.set(e.numOfCartItems),this._ToastrService.success(e.message,"FreshCart")}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-category-details"]],standalone:!0,features:[b],decls:3,vars:1,consts:[[1,"container","py-5"],[1,"text-center","text-muted","fs-5"],[1,"row","g-4"],[1,"col-md-3"],[1,"card","h-100","shadow-sm","border-0"],[1,"text-decoration-none",3,"routerLink"],[1,"card-img-top",3,"src","alt"],[1,"card-body","text-center","d-flex","flex-column"],[1,"card-title","mb-2"],[1,"fw-bold","text-success","mb-3"],[1,"btn-main","btn-sm","mt-auto",3,"click"]],template:function(e,m){e&1&&(r(0,"section",0),v(1,j,2,0,"p",1)(2,B,3,0,"div",2),n()),e&2&&(o(),C(m.products.length===0?1:2))},dependencies:[w,T]})};export{R as CategoryDetailsComponent};
