import{a as G}from"./chunk-UHWTRNOU.js";import{a as x,b as c,c as T,d as A,f as N,g as D,h as R,i as k,k as q}from"./chunk-AFUNZK7R.js";import"./chunk-NI4CGMN2.js";import{c as w,v as b,w as L}from"./chunk-RK5LR227.js";import{Fb as s,Gb as y,Mb as E,Pb as v,Sa as m,aa as _,ca as S,db as u,gb as f,kb as d,ob as l,pb as n,qb as C,xb as h,yb as F}from"./chunk-QHBEINOU.js";var I=(t,i)=>({"is-valid":t,"is-invalid":i});function V(t,i){t&1&&(l(0,"p",13),s(1,"email Is Required"),n())}function B(t,i){t&1&&(l(0,"p",13),s(1,"Enter a Valid Email"),n())}function M(t,i){if(t&1&&(l(0,"div",6),u(1,V,2,0,"p",13)(2,B,2,0,"p",13),n()),t&2){let o,e=F();m(),d((o=e.loginForm.get("email"))!=null&&o.getError("required")?1:(o=e.loginForm.get("email"))!=null&&o.getError("email")?2:-1)}}function O(t,i){t&1&&(l(0,"p",13),s(1,"password Is Required"),n())}function j(t,i){t&1&&(l(0,"p",13),s(1,"accept only egypt password numbers"),n())}function U(t,i){if(t&1&&(l(0,"div",6),u(1,O,2,0,"p",13)(2,j,2,0,"p",13),n()),t&2){let o,e=F();m(),d((o=e.loginForm.get("password"))!=null&&o.getError("required")?1:(o=e.loginForm.get("password"))!=null&&o.getError("pattern")?2:-1)}}function $(t,i){t&1&&(l(0,"span"),C(1,"i",14),n())}function z(t,i){if(t&1&&(l(0,"p",12),s(1),n()),t&2){let o=F();m(),y(o.msgErr)}}var P=class t{_FormBuilder=_(k);_AuthService=_(G);_Router=_(b);getAllProductsSub;isLoading=!1;msgErr="";loginForm=this._FormBuilder.group({email:[null,[c.required,c.email]],password:[null,[c.required,c.pattern(/^\w{6,}$/)]]});loginSubmit(){this.isLoading=!0,this.msgErr="",this.loginForm.valid?this.getAllProductsSub=this._AuthService.setLoginValue(this.loginForm.value).subscribe({next:i=>{this.isLoading=!1,i.message=="success"&&(localStorage.setItem("userToken",i.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"]))},error:i=>{this.msgErr=i.error.message,this.isLoading=!1}}):this.loginForm.markAllAsTouched()}ngOnDestroy(){this.getAllProductsSub?.unsubscribe()}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=S({type:t,selectors:[["app-login"]],standalone:!0,features:[E],decls:21,vars:13,consts:[[1,"bg-main-light","my-2","p-2","shadow"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["id","email","formControlName","email","type","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","password"],["id","password","formControlName","password","type","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-3"],["routerLink","/forget",1,"link-primary"],["type","submit",1,"btn-main"],[1,"alert","alert-danger","w-50","m-auto","text-center","mt-1"],[1,"my-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(o,e){if(o&1&&(l(0,"section",0)(1,"h1",1),s(2,"Login:"),n(),l(3,"form",2),h("ngSubmit",function(){return e.loginSubmit()}),l(4,"div",3)(5,"label",4),s(6,"email"),n(),C(7,"input",5),u(8,M,3,1,"div",6),n(),l(9,"div",3)(10,"label",7),s(11,"password"),n(),C(12,"input",8),u(13,U,3,1,"div",6),n(),l(14,"div",9)(15,"a",10),s(16,"Forget Password"),n(),l(17,"button",11),s(18," Login "),u(19,$,2,0,"span"),n()(),u(20,z,2,1,"p",12),n()()),o&2){let r,p,a,g;m(3),f("formGroup",e.loginForm),m(4),f("ngClass",v(7,I,!((r=e.loginForm.get("email"))!=null&&r.errors)&&(((r=e.loginForm.get("email"))==null?null:r.touched)||((r=e.loginForm.get("email"))==null?null:r.dirty)),((r=e.loginForm.get("email"))==null?null:r.errors)&&(((r=e.loginForm.get("email"))==null?null:r.touched)||((r=e.loginForm.get("email"))==null?null:r.dirty)))),m(),d((p=e.loginForm.get("email"))!=null&&p.errors&&((p=e.loginForm.get("email"))!=null&&p.touched||(p=e.loginForm.get("email"))!=null&&p.dirty)?8:-1),m(4),f("ngClass",v(10,I,!((a=e.loginForm.get("password"))!=null&&a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)),((a=e.loginForm.get("password"))==null?null:a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)))),m(),d((g=e.loginForm.get("password"))!=null&&g.errors&&((g=e.loginForm.get("password"))!=null&&g.touched||(g=e.loginForm.get("password"))!=null&&g.dirty)?13:-1),m(6),d(e.isLoading?19:-1),m(),d(e.msgErr?20:-1)}},dependencies:[q,N,x,T,A,D,R,w,L]})};export{P as LoginComponent};
