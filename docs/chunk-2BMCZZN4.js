import{a as T}from"./chunk-LC46PDLG.js";import"./chunk-NI4CGMN2.js";import{h as D,w as P}from"./chunk-RK5LR227.js";import{Fb as a,Gb as k,Hb as _,Mb as w,Oa as S,Ob as E,Sa as l,Sb as x,Ub as v,aa as b,ca as g,gb as f,ma as d,mb as h,na as u,nb as I,ob as i,pb as r,qb as s,tb as y,xb as p,yb as C}from"./chunk-QHBEINOU.js";var V=(o,t)=>t.product.id,O=o=>["/orders",o];function N(o,t){if(o&1){let e=y();i(0,"div",6)(1,"div",8)(2,"div"),s(3,"img",9),r()(),i(4,"div",10)(5,"div")(6,"h3"),a(7),r(),i(8,"p",11),a(9),x(10,"currency"),r(),i(11,"span",12),p("click",function(){let c=d(e).$implicit,m=C();return u(m.deleteCartItem(c.product.id))}),s(12,"i",4),a(13," Remove"),r()(),i(14,"div",13)(15,"span",14),p("click",function(){let c=d(e).$implicit,m=C();return u(m.updateQuantity(c.product.id,c.count+1))}),s(16,"i",15),r(),i(17,"span"),a(18),r(),i(19,"span",14),p("click",function(){let c=d(e).$implicit,m=C();return u(m.updateQuantity(c.product.id,c.count-1))}),s(20,"i",16),r()()()()}if(o&2){let e=t.$implicit;l(3),f("src",e.product.imageCover,S)("alt",e.product.title),l(4),_("",e.product.title," "),l(2),_("Price: ",v(10,5,e.price,"GBP"),""),l(9),k(e.count)}}var F=class o{_CartService=b(T);cartDetails={};ngOnInit(){this._CartService.getProductsCart().subscribe({next:t=>{this.cartDetails=t.data},error:t=>{console.log(t)}})}deleteCartItem(t){this._CartService.deleteSpecificCartItem(t).subscribe({next:e=>{this.cartDetails=e.data,this._CartService.cartNumber.set(e.numOfCartItems)},error:e=>{console.log(e)}})}updateQuantity(t,e){this._CartService.updateProductQuantity(t,String(e)).subscribe({next:n=>{this.cartDetails=n.data,this._CartService.cartNumber.set(n.numOfCartItems)},error:n=>{console.log(n)}})}clearItems(){this._CartService.clearCart().subscribe({next:t=>{console.log(t),t.message=="success"&&(this._CartService.cartNumber.set(0),this.cartDetails={})},error:t=>{console.log(t)}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=g({type:o,selectors:[["app-cart"]],standalone:!0,features:[w],decls:15,vars:7,consts:[[1,"bg-main-light","rounded-4","p-4","my-2","w-75","mx-auto","shadow"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h2","text-center","my-2"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fa-solid","fa-trash"],[1,"text-main"],[1,"row","mb-1","border-bottom","py-1"],[1,"btn-main","mt-2",3,"routerLink"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"m-0","text-main"],[1,"text-danger","cursor-pointer",3,"click"],[1,"d-flex","align-items-center","gap-2"],[1,"text-main","cursor-pointer",3,"click"],[1,"fa-solid","fa-circle-plus","fa-2xl"],[1,"fa-solid","fa-circle-minus","fa-2xl"]],template:function(e,n){e&1&&(i(0,"section",0)(1,"div",1)(2,"h1",2),a(3,"Shop Cart"),r(),i(4,"button",3),p("click",function(){return n.clearItems()}),i(5,"span"),s(6,"i",4),r(),a(7," Clear Cart"),r()(),i(8,"p",5),a(9),x(10,"currency"),r(),h(11,N,21,8,"div",6,V),i(13,"button",7),a(14,"Orders"),r()()),e&2&&(l(9),_("Total Cart Price : ",v(10,2,n.cartDetails.totalCartPrice,"GBP")," "),l(2),I(n.cartDetails.products),l(2),f("routerLink",E(5,O,n.cartDetails._id)))},dependencies:[D,P]})};export{F as CartComponent};
