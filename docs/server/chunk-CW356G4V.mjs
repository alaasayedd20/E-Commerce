import './polyfills.server.mjs';
import{a as R,b as U}from"./chunk-RR37FG2P.mjs";import{a as G}from"./chunk-6LC6M26E.mjs";import{a as z}from"./chunk-AI7PVN3K.mjs";import{a as $}from"./chunk-D2LYUNLP.mjs";import{a as O}from"./chunk-T2FRAZG6.mjs";import"./chunk-J4BDXTMW.mjs";import{a as B,c as V,e as W,j}from"./chunk-MO2ZCLTA.mjs";import"./chunk-CBYSDMSX.mjs";import{I as L}from"./chunk-YMXBVKXZ.mjs";import{$ as x,Eb as a,Fb as f,Gb as g,Hb as E,Ib as F,Jb as N,Lb as k,Mb as M,Na as P,Nb as D,Ra as n,Rb as v,Tb as S,Y as d,cb as y,fb as l,ja as C,jb as b,ka as h,kb as w,lb as m,mb as u,nb as t,ob as o,pb as p,sb as T,wb as I,xb as A}from"./chunk-PVA7NIBE.mjs";import"./chunk-5XUXGTUW.mjs";var H=(i,r)=>r.id,J=i=>["/details",i],K=()=>[1,2,3,4,5];function Q(i,r){i&1&&(t(0,"span"),p(1,"i",12),o())}function X(i,r){i&1&&(t(0,"span"),p(1,"i",13),o())}function Y(i,r){if(i&1){let e=T();t(0,"div",3)(1,"div",4)(2,"div",5),p(3,"img",6),t(4,"h3",7),a(5),o(),t(6,"h4",8),a(7),v(8,"termtext"),o(),t(9,"div",9)(10,"span"),a(11),o(),t(12,"div"),m(13,Q,2,0,"span",null,w),y(15,X,2,0,"span"),t(16,"span",10),a(17),o()()()(),t(18,"button",11),I("click",function(){let _=C(e).$implicit,c=A();return h(c.addCart(_.id))}),a(19,"Add to cart"),o()()()}if(i&2){let e=r.$implicit;n(2),l("routerLink",D(11,J,e.id)),n(),l("src",e.imageCover,P)("alt",e.title),n(2),g("",e.category.name," "),n(2),f(S(8,8,e.title,2)),n(4),g("",e.price," EGP"),n(2),u(M(13,K).slice(0,e.ratingsAverage)),n(2),b(e.ratingsAverage%2!==0?15:-1),n(2),f(e.ratingsAverage)}}var q=class i{_ProductsService=d(G);_CartService=d(z);_ToastrService=d($);_NgxSpinnerService=d(O);text="";getAllProductsSub;productsList=[];ngOnInit(){this._NgxSpinnerService.show(),this.getAllProductsSub=this._ProductsService.getAllProducts().subscribe({next:r=>{this.productsList=r.data,this._NgxSpinnerService.hide()},error:()=>{this._NgxSpinnerService.hide()}})}ngOnDestroy(){this.getAllProductsSub&&this.getAllProductsSub.unsubscribe()}addCart(r){this._CartService.addToCart(r).subscribe({next:e=>{this._CartService.cartNumber.set(e.numOfCartItems),this._ToastrService.success(e.message,"FreshCart")}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=x({type:i,selectors:[["app-products"]],standalone:!0,features:[k],decls:8,vars:4,consts:[[1,"my-2"],["type","search","placeholder","Search by name...",1,"form-control","w-75","mx-auto","my-4",3,"ngModelChange","ngModel"],[1,"row","g-3"],[1,"col-md-2"],[1,"product","p-2","cursor-pointer"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"text-main","small"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted"],[1,"btn-main","w-100",3,"click"],[1,"fas","fa-star","rating-color"],[1,"fas","fa-star-half-stroke","rating-color"]],template:function(e,s){e&1&&(t(0,"section",0)(1,"h2"),a(2,"All Products:"),o(),t(3,"input",1),N("ngModelChange",function(c){return F(s.text,c)||(s.text=c),c}),o(),t(4,"div",2),m(5,Y,20,14,"div",3,H),v(7,"search"),o()()),e&2&&(n(3),E("ngModel",s.text),n(2),u(S(7,1,s.productsList,s.text)))},dependencies:[L,R,U,j,B,V,W]})};export{q as ProductsComponent};
