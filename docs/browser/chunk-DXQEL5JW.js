import{a as k}from"./chunk-UHWTRNOU.js";import{a as D,b as _,c as L,d as G,f as I,g as V,h as B,i as M,k as O}from"./chunk-AFUNZK7R.js";import"./chunk-NI4CGMN2.js";import{c as A,v as x}from"./chunk-RK5LR227.js";import{Fb as a,Gb as N,Mb as q,Pb as S,Sa as o,aa as R,ca as P,db as g,gb as f,kb as p,ob as l,pb as r,qb as F,xb as T,yb as y}from"./chunk-QHBEINOU.js";var w=(t,n)=>({"is-valid":t,"is-invalid":n});function j(t,n){t&1&&(l(0,"p",17),a(1,"Name Is Required"),r())}function z(t,n){t&1&&(l(0,"p",17),a(1,"Name Should be more than or equal 3 chars"),r())}function H(t,n){t&1&&(l(0,"p",17),a(1,"Name Should be less than or equal 20 chars"),r())}function J(t,n){if(t&1&&(l(0,"div",6),g(1,j,2,0,"p",17)(2,z,2,0,"p",17)(3,H,2,0,"p",17),r()),t&2){let i,e=y();o(),p((i=e.registerForm.get("name"))!=null&&i.getError("required")?1:(i=e.registerForm.get("name"))!=null&&i.getError("minlength")?2:(i=e.registerForm.get("name"))!=null&&i.getError("maxlength")?3:-1)}}function K(t,n){t&1&&(l(0,"p",17),a(1,"Email Is Required"),r())}function Q(t,n){t&1&&(l(0,"p",17),a(1,"Enter a Valid Email"),r())}function U(t,n){if(t&1&&(l(0,"div",6),g(1,K,2,0,"p",17)(2,Q,2,0,"p",17),r()),t&2){let i,e=y();o(),p((i=e.registerForm.get("email"))!=null&&i.getError("required")?1:(i=e.registerForm.get("email"))!=null&&i.getError("email")?2:-1)}}function W(t,n){t&1&&(l(0,"p",17),a(1,"Phone Is Required"),r())}function X(t,n){t&1&&(l(0,"p",17),a(1,"accept only egypt phone numbers"),r())}function Y(t,n){if(t&1&&(l(0,"div",6),g(1,W,2,0,"p",17)(2,X,2,0,"p",17),r()),t&2){let i,e=y();o(),p((i=e.registerForm.get("phone"))!=null&&i.getError("required")?1:(i=e.registerForm.get("phone"))!=null&&i.getError("pattern")?2:-1)}}function Z(t,n){t&1&&(l(0,"p",17),a(1,"Password Is Required"),r())}function ee(t,n){t&1&&(l(0,"p",17),a(1,"must be at least 6 chars"),r())}function te(t,n){if(t&1&&(l(0,"div",6),g(1,Z,2,0,"p",17)(2,ee,2,0,"p",17),r()),t&2){let i,e=y();o(),p((i=e.registerForm.get("password"))!=null&&i.getError("required")?1:(i=e.registerForm.get("password"))!=null&&i.getError("pattern")?2:-1)}}function re(t,n){t&1&&(l(0,"p",6),a(1,"Password confirmation is incorrect"),r())}function ne(t,n){t&1&&(l(0,"span"),F(1,"i",18),r())}function ie(t,n){if(t&1&&(l(0,"p",16),a(1),r()),t&2){let i=y();o(),N(i.msgErr)}}var $=class t{_AuthService=R(k);_FormBuilder=R(M);_Router=R(x);getAllProductsSub;msgErr="";isLoading=!1;registerForm=this._FormBuilder.group({name:[null,[_.required,_.minLength(3),_.maxLength(20)]],email:[null,[_.required,_.email]],password:[null,[_.required,_.pattern(/^\w{6,}$/)]],rePassword:[null],phone:[null,[_.required,_.pattern(/^01[0125][0-9]{8}$/)]]},{validators:this.confirmPassword});registerSubmit(){this.isLoading=!0,this.msgErr="",this.registerForm.valid?this.getAllProductsSub=this._AuthService.setRegisterForm(this.registerForm.value).subscribe({next:n=>{n.message=="success"&&this._Router.navigate(["/login"]),console.log(n),this.isLoading=!1},error:n=>{this.msgErr=n.error.message,console.log(n),this.isLoading=!1}}):(this.registerForm.setErrors({mismatch:!0}),this.registerForm.markAllAsTouched())}confirmPassword(n){return n.get("password")?.value===n.get("rePassword")?.value?null:{mismatch:!0}}ngOnDestroy(){this.getAllProductsSub?.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=P({type:t,selectors:[["app-register"]],standalone:!0,features:[q],decls:33,vars:28,consts:[[1,"bg-main-light","my-2","p-2","shadow"],[1,"text-main","h2"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","name"],["formControlName","name","id","name","type","text",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control",3,"ngClass"],["for","phone"],["formControlName","phone","id","phone","type","tel",1,"form-control",3,"ngClass"],["for","password"],["formControlName","password","id","password","type","password",1,"form-control",3,"ngClass"],["for","rePassword"],["formControlName","rePassword","id","rePassword","type","password",1,"form-control",3,"ngClass"],["type","submit",1,"btn-main","d-block","ms-auto"],[1,"alert","alert-danger","text-center","my-0","mx-auto","w-50"],[1,"my-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(i,e){if(i&1&&(l(0,"section",0)(1,"h1",1),a(2,"Register now:"),r(),l(3,"form",2),T("ngSubmit",function(){return e.registerSubmit()}),l(4,"div",3)(5,"label",4),a(6,"name"),r(),F(7,"input",5),g(8,J,4,1,"div",6),r(),l(9,"div",3)(10,"label",7),a(11,"email"),r(),F(12,"input",8),g(13,U,3,1,"div",6),r(),l(14,"div",3)(15,"label",9),a(16,"phone"),r(),F(17,"input",10),g(18,Y,3,1,"div",6),r(),l(19,"div",3)(20,"label",11),a(21,"password"),r(),F(22,"input",12),g(23,te,3,1,"div",6),r(),l(24,"div",3)(25,"label",13),a(26,"rePassword"),r(),F(27,"input",14),g(28,re,2,0,"p",6),r(),l(29,"button",15),a(30," Register "),g(31,ne,2,0,"span"),r(),g(32,ie,2,1,"p",16),r()()),i&2){let m,C,s,h,u,v,d,E,c,b;o(3),f("formGroup",e.registerForm),o(4),f("ngClass",S(13,w,!((m=e.registerForm.get("name"))!=null&&m.errors)&&(((m=e.registerForm.get("name"))==null?null:m.touched)||((m=e.registerForm.get("name"))==null?null:m.dirty)),((m=e.registerForm.get("name"))==null?null:m.errors)&&(((m=e.registerForm.get("name"))==null?null:m.touched)||((m=e.registerForm.get("name"))==null?null:m.dirty)))),o(),p((C=e.registerForm.get("name"))!=null&&C.errors&&((C=e.registerForm.get("name"))!=null&&C.touched||(C=e.registerForm.get("name"))!=null&&C.dirty)?8:-1),o(4),f("ngClass",S(16,w,!((s=e.registerForm.get("email"))!=null&&s.errors)&&(((s=e.registerForm.get("email"))==null?null:s.touched)||((s=e.registerForm.get("email"))==null?null:s.dirty)),((s=e.registerForm.get("email"))==null?null:s.errors)&&(((s=e.registerForm.get("email"))==null?null:s.touched)||((s=e.registerForm.get("email"))==null?null:s.dirty)))),o(),p((h=e.registerForm.get("email"))!=null&&h.errors&&((h=e.registerForm.get("email"))!=null&&h.touched||(h=e.registerForm.get("email"))!=null&&h.dirty)?13:-1),o(4),f("ngClass",S(19,w,!((u=e.registerForm.get("phone"))!=null&&u.errors)&&(((u=e.registerForm.get("phone"))==null?null:u.touched)||((u=e.registerForm.get("phone"))==null?null:u.dirty)),((u=e.registerForm.get("phone"))==null?null:u.errors)&&(((u=e.registerForm.get("phone"))==null?null:u.touched)||((u=e.registerForm.get("phone"))==null?null:u.dirty)))),o(),p((v=e.registerForm.get("phone"))!=null&&v.errors&&((v=e.registerForm.get("phone"))!=null&&v.touched||(v=e.registerForm.get("phone"))!=null&&v.dirty)?18:-1),o(4),f("ngClass",S(22,w,!((d=e.registerForm.get("password"))!=null&&d.errors)&&(((d=e.registerForm.get("password"))==null?null:d.touched)||((d=e.registerForm.get("password"))==null?null:d.dirty)),((d=e.registerForm.get("password"))==null?null:d.errors)&&(((d=e.registerForm.get("password"))==null?null:d.touched)||((d=e.registerForm.get("password"))==null?null:d.dirty)))),o(),p((E=e.registerForm.get("password"))!=null&&E.errors&&((E=e.registerForm.get("password"))!=null&&E.touched||(E=e.registerForm.get("password"))!=null&&E.dirty)?23:-1),o(4),f("ngClass",S(25,w,!e.registerForm.getError("mismatch")&&(((c=e.registerForm.get("rePassword"))==null?null:c.touched)||((c=e.registerForm.get("rePassword"))==null?null:c.dirty)),e.registerForm.getError("mismatch")&&(((c=e.registerForm.get("rePassword"))==null?null:c.touched)||((c=e.registerForm.get("rePassword"))==null?null:c.dirty)))),o(),p(e.registerForm.getError("mismatch")&&((b=e.registerForm.get("rePassword"))!=null&&b.touched||(b=e.registerForm.get("rePassword"))!=null&&b.dirty)?28:-1),o(3),p(e.isLoading?31:-1),o(),p(e.msgErr?32:-1)}},dependencies:[O,I,D,L,G,V,B,A]})};export{$ as RegisterComponent};
