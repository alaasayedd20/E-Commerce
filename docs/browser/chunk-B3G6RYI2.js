import{a as N}from"./chunk-UHWTRNOU.js";import{a as x,b as a,c as y,d as F,f as E,g as V,h as P,i as L,k as G}from"./chunk-AFUNZK7R.js";import"./chunk-NI4CGMN2.js";import{v as b}from"./chunk-RK5LR227.js";import{Fb as r,Mb as S,Sa as s,aa as _,ca as h,db as f,gb as m,kb as c,ma as g,na as C,ob as n,pb as o,qb as l,tb as w,xb as v,yb as d}from"./chunk-QHBEINOU.js";function A(t,i){t&1&&(n(0,"span"),l(1,"i",7),o())}function D(t,i){if(t&1){let e=w();n(0,"form",2),v("ngSubmit",function(){g(e);let u=d();return C(u.verifyEmailSubmit())}),n(1,"div",3)(2,"label",4),r(3,"email"),o(),l(4,"input",5),o(),n(5,"button",6),r(6," Verify Email "),f(7,A,2,0,"span"),o()()}if(t&2){let e=d();m("formGroup",e.verifyEmail),s(5),m("disabled",e.verifyEmail.invalid),s(2),c(e.isLoading?7:-1)}}function R(t,i){t&1&&(n(0,"span"),l(1,"i",7),o())}function B(t,i){if(t&1){let e=w();n(0,"form",2),v("ngSubmit",function(){g(e);let u=d();return C(u.verifyCodeSubmit())}),n(1,"div",3)(2,"label",8),r(3,"resetCode"),o(),l(4,"input",9),o(),n(5,"button",6),r(6," Verify Code "),f(7,R,2,0,"span"),o()()}if(t&2){let e=d();m("formGroup",e.verifyCode),s(5),m("disabled",e.verifyCode.invalid),s(2),c(e.isLoading?7:-1)}}function q(t,i){t&1&&(n(0,"span"),l(1,"i",7),o())}function M(t,i){if(t&1){let e=w();n(0,"form",2),v("ngSubmit",function(){g(e);let u=d();return C(u.resetPasswordSubmit())}),n(1,"div",3)(2,"label",4),r(3,"email"),o(),l(4,"input",10),o(),n(5,"div",3)(6,"label",11),r(7,"newPassword"),o(),l(8,"input",12),o(),n(9,"button",6),r(10,"Reset Password "),f(11,q,2,0,"span"),o()()}if(t&2){let e=d();m("formGroup",e.resetPassword),s(9),m("disabled",e.resetPassword.invalid),s(2),c(e.isLoading?11:-1)}}var T=class t{_FormBuilder=_(L);_AuthService=_(N);_Router=_(b);step=1;isLoading=!1;verifyEmail=this._FormBuilder.group({email:[null,[a.required,a.email]]});verifyCode=this._FormBuilder.group({resetCode:[null,[a.required,a.pattern(/^\w{6}$/)]]});resetPassword=this._FormBuilder.group({email:[null,[a.required,a.email]],newPassword:[null,[a.required,a.pattern(/^\w{6,}$/)]]});verifyEmailSubmit(){let i=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(i),this.isLoading=!0,this._AuthService.setEmailVerify(this.verifyEmail.value).subscribe({next:e=>{this.isLoading=!1,e.statusMsg=="success"&&(this.step=2)},error:e=>{console.log(e),this.isLoading=!1}})}verifyCodeSubmit(){this.isLoading=!0,this._AuthService.setCodeVerify(this.verifyCode.value).subscribe({next:i=>{this.isLoading=!1,i.status=="Success"&&(this.step=3)},error:i=>{console.log(i),this.isLoading=!1}})}resetPasswordSubmit(){this.isLoading=!0,this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:i=>{this.isLoading=!1,localStorage.setItem("userToken",i.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:i=>{console.log(i),this.isLoading=!1}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-forgetpassword"]],standalone:!0,features:[S],decls:6,vars:1,consts:[[1,"text-main","text-center","my-2"],[1,"btn-main-light","rounded-4","shadow","p-3",3,"formGroup"],[1,"btn-main-light","rounded-4","shadow","p-3",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control"],[1,"btn-main",3,"disabled"],[1,"fas","fa-spin","fa-spinner"],["for","resetCode"],["formControlName","resetCode","id","resetCode","type","text",1,"form-control"],["readonly","","formControlName","email","id","email","type","email",1,"form-control"],["for","newPassword"],["formControlName","newPassword","id","newPassword","type","password",1,"form-control"]],template:function(e,p){e&1&&(n(0,"section")(1,"h1",0),r(2,"Forget Password"),o(),f(3,D,8,3,"form",1)(4,B,8,3,"form",1)(5,M,12,3,"form",1),o()),e&2&&(s(3),c(p.step==1?3:p.step==2?4:p.step==3?5:-1))},dependencies:[G,E,x,y,F,V,P]})};export{T as ForgetpasswordComponent};
